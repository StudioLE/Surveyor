<?xml version="1.0" encoding="utf-8" ?>
<Project xmlns="http://schemas.microsoft.com/developer/msbuild/2003">

  <Target Name="Versioning" BeforeTargets="BeforeBuild" Condition="Exists('$(SurveyorAssemblyPath)')">
    <Message Text="Updating version number..." Importance="high"/>
    <VersioningTask PackageName="$(SurveyorPackageName)" Feed="$(SurveyorFeed)" AuthToken="$(SurveyorAuthToken)">
      <Output TaskParameter="Latest" PropertyName="LatestVersion"/>
      <Output TaskParameter="NextMajor" PropertyName="NextMajorVersion"/>
      <Output TaskParameter="NextMinor" PropertyName="NextMinorVersion"/>
      <Output TaskParameter="NextPatch" PropertyName="NextPatchVersion"/>
    </VersioningTask>
    <Message Text="Latest: $(LatestVersion)" Importance="high"/>
    <Message Text="Next Major: $(NextMajorVersion)" Importance="high"/>
    <Message Text="Next Minor: $(NextMinorVersion)" Importance="high"/>
    <Message Text="Next Patch: $(NextPatchVersion)" Importance="high"/>
  </Target>

  <Target Name="NoVersioning" BeforeTargets="BeforeBuild" Condition=" ! Exists('$(SurveyorAssemblyPath)')">
    <Warning Text="Surveyor assembly not found: $(SurveyorAssemblyPath)"/>
    <Warning Text="Versioning has failed but build will continue."/>
  </Target>

</Project>
